<!-- Supplemental context for LVM Operator dev environment. Repo's native CLAUDE.md (if any) takes priority. -->

# konflux-release-data — LVMS Context

**Category**: Deployment

**Purpose**: Central configuration repository for Konflux CI/CD — defines how components are built, tested, and released through the Konflux pipeline system.

**LVMS Relevance**: Contains the release pipeline configurations that control how LVMS container images are built and promoted through the release process.

**Important**: This is a GitLab repo (`gitlab.cee.redhat.com`) — requires VPN access. Uses a **branching strategy** instead of forks for contributions (unlike GitHub repos which use fork model).

**Key concepts**:
- **Tenant**: A namespace in Konflux that owns components and pipelines
- **ReleasePlanAdmission**: Defines what releases are allowed and their target
- **Enterprise Contract (EC)**: Policy engine that validates builds before release
- **FBC (File-Based Catalog)**: OLM catalog format for operator distribution

**Key LVMS paths**:
- Component Configurations:
  - `tenants-config/cluster/stone-prd-rh01/tenants/logical-volume-manag-tenant/lvm-operator/` — Operator Bundle component definitions, tests, release plans, and image repositories
  - `tenants-config/cluster/stone-prd-rh01/tenants/logical-volume-manag-tenant/lvm-operator-catalog` — Operator catalog component, release plan, and image registry definitions
  - `tenants-config/cluster/stone-prd-rh01/tenants/logical-volume-manag-tenant/nudge-renovate-config.yaml` — Component nudging definition for all LVM Operator and catalog components
  - `tenants-config/auto-generated/cluster/stone-prd-rh01/tenants/logical-volume-manag-tenant/` — Autogenerated configuration files (Kubernetes CR form) applied to the Konflux cluster to manage tekton build, test and release pipelines

- Release Plan Admissions:
  - `config/stone-prd-rh01.pg1f.p1/product/ReleasePlanAdmission/logical-volume-manag/` — Release Plan Admission definitions for both the Operator bundle and the Catalog

- Enterprise Contract policies:
  - `config/stone-prd-rh01.pg1f.p1/product/EnterpriseContractPolicy/fbc-logical-volume-manag-prod.yaml` — Custom production policy for the LVM Operator FBC
  - `config/stone-prd-rh01.pg1f.p1/product/EnterpriseContractPolicy/fbc-logical-volume-manag-stage.yaml` — Custom staging policy for the LVM Operator FBC
  - `config/common/product/EnterpriseContractPolicy/registry-standard.yaml` — Standard production policy (do not modify)
  - `config/common/product/EnterpriseContractPolicy/registry-standard-stage.yaml` — Standard staging policy (do not modify)

- Product definitions:
  - `prodsec/logical-volume-manag.yaml` — Prodsec definition that relates to the `product-definitions` repository
  - `constraints/product/logical-volume-manag.yaml` — Product release constraints for LVM Operator and the catalog

**build-single.sh usage**:
```bash
# Regenerate autogenerated configuration files for the LVMS tenant
# Must be called with the tenant namespace as argument
./tenants-config/build-single.sh logical-volume-manag-tenant
```

**Branching strategy**: Unlike other repos which use forks, `konflux-release-data` uses a branching model: `<user_alias>/<changeset_summary>`

**Release flow**:
1. Code merges to `lvm-operator` main branch
2. Konflux `.tekton/` pipelines build container images
3. `ReleasePlanAdmission` in this repo controls promotion gates
4. Enterprise Contract policies validate the build artifacts
5. Approved builds are promoted to staging, then production

**Common tasks**:
- Updating release gates for a new LVMS version
- Adding or modifying Enterprise Contract policies
- Debugging failed Konflux pipeline runs
- Configuring FBC catalog entries for new operator versions
